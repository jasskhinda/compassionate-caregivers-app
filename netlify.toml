[build]
  command = """
    # Install Flutter
    git clone https://github.com/flutter/flutter.git --depth 1 -b stable _flutter
    export PATH="$PATH:$PWD/_flutter/bin"

    # Run Flutter doctor and get dependencies
    flutter doctor
    flutter pub get

    # Build the web app
    flutter build web --release
  """
  publish = "build/web"

[build.environment]
  FLUTTER_VERSION = "stable"

[[headers]]
  for = "/assets/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "*.js"
  [headers.values]
    Cache-Control = "public, max-age=0, must-revalidate"

[[headers]]
  for = "*.html"
  [headers.values]
    Cache-Control = "public, max-age=0, must-revalidate"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200